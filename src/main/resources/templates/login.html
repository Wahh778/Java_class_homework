<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>企业食堂</title>
	<!-- 样式文件 -->
	<link rel="icon" sizes="192x192" th:href="@{/admin/images/logo1.png}">
	<link rel="stylesheet" th:href="@{/component/pear/css/pear.css}" />
	<link rel="stylesheet" th:href="@{/admin/css/other/login.css}" />
	<!-- 引入复古英文字体 -->
	<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@500&display=swap" rel="stylesheet">
	<style>
		/* 全局重置 & 基础样式 */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		html, body {
			height: 100%;
			font-family: "Microsoft Yahei", "PingFang SC", sans-serif;
		}

		/* 登录容器 - 核心优化 */
		.layui-form {
			width: 400px !important;
			margin: 120px auto 0 !important;
			padding: 40px 30px !important;
			background: rgba(255, 255, 255, 0.50) !important;
			border-radius: 16px !important;
			backdrop-filter: blur(12px) !important;
			box-shadow: 0 12px 32px rgba(152, 95, 13, 0.15) !important;
			border: 1px solid rgba(224, 210, 184, 0.3) !important;
		}

		/* logo + 标题 容器 */
		.logo-title-wrap {
			display: flex;
			align-items: center;
			justify-content: center;
			margin-bottom: 30px !important;
			padding-bottom: 15px !important;
			border-bottom: 1px solid rgba(152, 95, 13, 0.1) !important;
			position: relative;
		}

		/* Logo 优化 */
		.logo {
			width: 68px !important;
			margin: 0 15px 0 0 !important;
			background: transparent !important;
			transition: all 0.4s ease !important;
			/* logo同步入场动画 */
			opacity: 0;
			transform: translateX(-20px);
			animation: logo-in 0.6s ease forwards 0.1s;
		}
		.logo:hover {
			transform: scale(1.1) rotate(2deg) !important;
		}
		@keyframes logo-in {
			to { opacity: 1; transform: translateX(0); }
		}

		/* ========== 核心：My/Canteen 逐词跳动动画 ========== */
		.title-container {
			display: flex;
			align-items: baseline;
			gap: 8px;
		}
		/* My 跳动入场 + 轻浮动 */
		.title-my {
			font-size: 28px !important;
			font-family: 'Poppins', sans-serif !important;
			font-weight: 500 !important;
			letter-spacing: 2px !important;
			background: linear-gradient(90deg, #8a580b, #985f0d) !important;
			-webkit-background-clip: text !important;
			background-clip: text !important;
			color: transparent !important;
			/* 初始隐藏 */
			opacity: 0;
			transform: translateY(30px) scale(0.9);
			/* 跳动入场动画 */
			animation: jump-my 0.8s cubic-bezier(0.17, 0.89, 0.32, 1.28) forwards 0.3s,
			float-light 4s ease-in-out infinite 1.2s;
		}
		/* Canteen 跳动入场 + 重浮动 */
		.title-canteen {
			font-size: 40px !important;
			font-family: 'Playfair Display', serif !important;
			font-weight: 700 !important;
			letter-spacing: 1px !important;
			background: linear-gradient(120deg, #985f0d, #c4821a, #985f0d) !important;
			-webkit-background-clip: text !important;
			background-clip: text !important;
			color: transparent !important;
			-webkit-text-stroke: 0.5px rgba(152, 95, 13, 0.2) !important;
			/* 初始隐藏 */
			opacity: 0;
			transform: translateY(30px) scale(0.9);
			/* 跳动入场动画（延迟0.6s，比My晚） */
			animation: jump-canteen 0.8s cubic-bezier(0.17, 0.89, 0.32, 1.28) forwards 0.6s,
			float-heavy 4s ease-in-out infinite 1.5s;
			position: relative;
		}
		/* Canteen 底部装饰线（同步入场） */
		.title-canteen::after {
			content: '';
			position: absolute;
			bottom: -4px;
			left: 0;
			width: 100%;
			height: 2px;
			background: linear-gradient(90deg, transparent, #985f0d, transparent) !important;
			border-radius: 1px;
			opacity: 0;
			animation: line-in 0.8s ease forwards 0.9s,
			line-fade 4s ease-in-out infinite 1.8s;
		}

		/* My 跳动动画（轻量回弹） */
		@keyframes jump-my {
			0% { opacity: 0; transform: translateY(30px) scale(0.9); }
			60% { opacity: 1; transform: translateY(-8px) scale(1.05); }
			100% { opacity: 1; transform: translateY(0) scale(1); }
		}
		/* Canteen 跳动动画（更重的回弹） */
		@keyframes jump-canteen {
			0% { opacity: 0; transform: translateY(30px) scale(0.9); }
			60% { opacity: 1; transform: translateY(-12px) scale(1.08); }
			100% { opacity: 1; transform: translateY(0) scale(1.02); }
		}
		/* 装饰线入场 */
		@keyframes line-in {
			to { opacity: 1; }
		}
		/* 后续轻浮动动画 */
		@keyframes float-light {
			0% { transform: translateY(0) scale(1); }
			50% { transform: translateY(-4px) scale(1.02); }
			100% { transform: translateY(0) scale(1); }
		}
		@keyframes float-heavy {
			0% { transform: translateY(0) scale(1.02); }
			50% { transform: translateY(-6px) scale(1.05); }
			100% { transform: translateY(0) scale(1.02); }
		}
		@keyframes line-fade {
			0% { opacity: 0.6; width: 80%; left: 10%; }
			50% { opacity: 1; width: 100%; left: 0; }
			100% { opacity: 0.6; width: 80%; left: 10%; }
		}

		/* 输入框/按钮等原有样式不变 */
		.layui-form-item {
			margin-top: 25px !important;
		}
		.layui-input {
			height: 50px !important;
			line-height: 50px !important;
			padding-left: 20px !important;
			border-radius: 10px !important;
			border: 1px solid #e0d2b8 !important;
			background: rgba(255, 255, 255, 0.88) !important;
			transition: all 0.3s ease !important;
			font-size: 15px !important;
			color: #666 !important;
		}
		.layui-input::placeholder {
			color: #b8a588 !important;
		}
		.layui-input:focus {
			box-shadow: 0 0 6px 2px rgba(152, 95, 13, 0.2) !important;
			border-color: #985f0d !important;
			outline: none !important;
			transform: translateY(-1px) !important;
		}
		.code-wrap {
			display: flex;
			align-items: center;
			gap: 12px !important;
		}
		.code {
			flex: 1 !important;
			margin: 0 !important;
		}
		.codeImage {
			width: 100px !important;
			height: 50px !important;
			border-radius: 10px !important;
			cursor: pointer;
			transition: all 0.3s ease !important;
			border: 1px solid #e0d2b8 !important;
		}
		.codeImage:hover {
			transform: scale(1.05) !important;
			border-color: #985f0d !important;
		}
		.layui-form button {
			width: 100% !important;
			height: 50px !important;
			line-height: 50px !important;
			font-size: 17px !important;
			background: linear-gradient(120deg, #985f0d, #b97c18) !important;
			color: #fff !important;
			font-weight: 600 !important;
			border-radius: 10px !important;
			transition: all 0.3s ease !important;
			border: none !important;
			margin-top: 15px !important;
			letter-spacing: 2px !important;
		}
		.layui-form button:hover {
			background: linear-gradient(120deg, #7a4a0a, #985f0d) !important;
			transform: translateY(-3px) !important;
			box-shadow: 0 8px 20px rgba(152, 95, 13, 0.3) !important;
		}
		.layui-form button:active {
			transform: translateY(-1px) !important;
			box-shadow: 0 4px 12px rgba(152, 95, 13, 0.2) !important;
		}
		body {
			background-repeat: no-repeat !important;
			background-color: #f9f5ef !important;
			background-size: cover !important;
			background-position: center !important;
			height: 100vh !important;
			overflow: hidden !important;
		}
		/* 移动端适配 */
		@media (max-width:768px){
			.layui-form {
				width: 92% !important;
				margin-top: 80px !important;
				padding: 30px 20px !important;
			}
			.title-my {
				font-size: 24px !important;
			}
			.title-canteen {
				font-size: 32px !important;
			}
			.logo {
				width: 60px !important;
			}
		}
	</style>
</head>
<body th:background="|@{/admin/images/background.jpg}|">
<form class="layui-form" action="javascript:void(0);">
	<!-- logo+标题容器 -->
	<div class="layui-form-item logo-title-wrap">
		<img class="logo" th:src="@{/admin/images/logo1.png}" alt="My Canteen Logo"/>
		<div class="title-container">
			<div class="title-my">企业</div>
			<div class="title-canteen">食堂</div>
		</div>
	</div>

	<!-- 账号/密码/验证码/按钮 原有结构不变 -->
	<div class="layui-form-item">
		<input placeholder="账 户" type="text" id="username" lay-verify="required" class="layui-input"  />
	</div>
	<div class="layui-form-item">
		<input placeholder="密 码" type="password" id="password" lay-verify="required" class="layui-input"  />
	</div>
	<div class="layui-form-item code-wrap">
		<input placeholder="验证码" type="text" id="code" lay-verify="required" class="code layui-input"  />
		<img th:src="@{/common/getCode}" class="codeImage" id="codeImg" onclick="reClick()" alt="验证码"/>
	</div>
	<div class="layui-form-item">
		<button type="button" class="pear-btn pear-btn-success login" lay-submit lay-filter="login">
			登 录
		</button>
	</div>
</form>

<!-- 资源引入+JS 原有逻辑不变 -->
<script th:src="@{/component/layui/layui.js}"></script>
<script th:src="@{/component/pear/pear.js}"></script>
<script>
	layui.use(['form', 'button', 'popup'], function() {
		var $ = layui.$;
		var form = layui.form;
		var button = layui.button;
		var popup = layui.popup;

		form.on('submit(login)', function(data) {
			var name = $('#username').val();
			var password = $('#password').val();
			var code = $('#code').val();

			if (!name || !password || !code) {
				popup.failure("请填写完整信息！");
				return false;
			}

			$.ajax({
				url: "/login/userLogin",
				type: "post",
				data: {
					'username': name,
					'password': password,
					'captcha': code
				},
				dataType: "json",
				contentType: "application/x-www-form-urlencoded",
				success: function (res){
					if (res.code === 200) {
						button.load({
							elem: '.login',
							time: 500,
							done: function() {
								popup.success(res.data, function() {
									location.href = res.data === "员工登录成功" ? "/front/toMain" : "/back/toIndex";
								});
							}
						})
					}else{
						popup.failure(res.msg, function (){
							reClick();
						})
					}
				},
				error: function() {
					popup.failure("网络异常，请稍后重试！");
				}
			});
			return false;
		});
	})

	function reClick() {
		document.getElementById("codeImg").src = "/common/getCode?time=" + new Date().getTime();
	}
</script>
</body>
</html>